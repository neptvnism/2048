<!DOCTYPE html>
<html>
<head>
  <title>2048</title>
  <style>
    #game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #game-board {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-template-rows: repeat(4, 100px);
      gap: 10px;
      border: 2px solid black;
    }

    .tile {
      width: 90px;
      height: 90px;
      background-color: #ccc;
      border-radius: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <div id="game-board"></div>
    <div id="score">Score: 0</div>
  </div>
  <script>
    const boardSize = 4;
    let board = []; // Initialize the board array
    let score = 0;

    // Create the game board elements
    const gameBoard = document.getElementById('game-board');
    for (let i = 0; i < boardSize * boardSize; i++) {
      const tile = document.createElement('div');
      tile.classList.add('tile');
      tile.id = `tile-${i}`;
      gameBoard.appendChild(tile);
      board.push(0); // Initialize board with 0 values
    }

    // Function to generate a new tile (2 or 4)
    function generateNewTile() {
      let emptyCells = [];
      for (let i = 0; i < boardSize * boardSize; i++) {
        if (board[i] === 0) {
          emptyCells.push(i);
        }
      }
      if (emptyCells.length > 0) {
        let randomIndex = Math.floor(Math.random() * emptyCells.length);
        let newTileValue = Math.random() < 0.9 ? 2 : 4; // 90% chance of 2, 10% chance of 4
        board[emptyCells[randomIndex]] = newTileValue;
        updateTileDisplay(emptyCells[randomIndex], newTileValue);
      }
    }

    // Function to update the tile display based on board values
    function updateTileDisplay(index, value) {
      const tile = document.getElementById(`tile-${index}`);
      if (value === 0) {
        tile.textContent = '';
      } else {
        tile.textContent = value;
      }
    }

    // Function to handle moving tiles (example: moving up)
    function moveUp() {
      for (let col = 0; col < boardSize; col++) {
        for (let row = 1; row < boardSize; row++) {
          let currentRow = row;
          let currentValue = board[row * boardSize + col];
          if (currentValue !== 0) {
            // Move up until you hit a non-zero tile or the top row
            while (currentRow > 0 && board[(currentRow - 1) * boardSize + col] === 0) {
              board[(currentRow - 1) * boardSize + col] = currentValue;
              board[currentRow * boardSize + col] = 0;
              currentRow--;
            }
            // Merge with the tile above if they have the same value
            if (currentRow > 0 && board[(currentRow - 1) * boardSize + col] === currentValue) {
              board[(currentRow - 1) * boardSize + col] *= 2;
              score += board[(currentRow - 1) * boardSize + col];
              board[currentRow * boardSize + col] = 0;
              updateScore();
            }
          }
        }
      }
      generateNewTile();
      updateBoardDisplay();
    }

    // Function to update the display of all tiles
    function updateBoardDisplay() {
      for (let i = 0; i < boardSize * boardSize; i++) {
        updateTileDisplay(i, board[i]);
      }
    }

    // Function to update the score display
    function updateScore() {
      document.getElementById('score').textContent = 'Score: ' + score;
    }

    // Initialize the game
    generateNewTile();
    generateNewTile();
    updateBoardDisplay();

    // Add event listeners for keyboard input
    document.addEventListener('keydown', (event) => {
      switch (event.key) {
        case 'ArrowUp':
          moveUp();
          break;
        // Add cases for other directions (down, left, right)
        case 'ArrowDown':
          // Implement moveDown()
          break;
        case 'ArrowLeft':
          // Implement moveLeft()
          break;
        case 'ArrowRight':
          // Implement moveRight()
          break;
      }
    });
  </script>
</body>
</html>
